# 精灵图切割工具 v2.0

## 📋 项目简介

咳咳 本人没有任何网页基础，这玩意纯AI写加本人校对产出的，耗时一天半，主打一个能用就行
用于切割成多个独立的图片文件。该工具支持多种排序方式、批量处理和历史记录管理，为游戏开发者和图像处理人员提供便捷的图片处理解决方案。

## ✨ 主要功能

### 🖼️ 图片处理
- **多格式支持**：支持 PNG、JPEG、GIF、WebP 格式
- **拖拽上传**：支持文件拖拽和点击上传
- **实时预览**：上传后即时显示预览效果
- **序号标注**：可在切割的图片上添加序号便于识别

### ⚙️ 切割设置
- **灵活参数**：自定义行数（1-50）和列数（1-50）
- **起始序号**：可设置切割文件的起始编号
- **字号调节**：序号字体大小可调（8-100px）
- **多种排序**：
  - 正常排序（从左到右，从上到下）
  - 奇数行从左到右，偶数行从右到左
  - 偶数行从左到右，奇数行从右到左

### 📁 文件管理
- **批量下载**：一键下载所有切割后的图片（ZIP格式）
- **历史记录**：自动保存切割历史，支持重新下载
- **历史管理**：可查看、清理历史记录
- **可拖拽窗格**：历史文件窗格支持拖拽移动

### 🎛️ 用户体验
- **快捷键支持**：
  - `Ctrl+O`：打开文件选择
  - `Ctrl+P`：生成预览
  - `Ctrl+S`：开始切割
- **响应式设计**：适配桌面和移动设备
- **现代界面**：采用渐变背景和毛玻璃效果
- **无障碍支持**：支持屏幕阅读器和键盘导航

## 🚀 快速开始

### 环境要求
- 现代Web浏览器（Chrome、Firefox、Safari、Edge）
- 支持HTML5、Canvas、FileReader API

### 安装使用

1. **下载项目**
   ```bash
   git clone [项目地址]
   cd 精灵图切割工具/Web/HTML/2.0
   ```

2. **启动服务**
   ```bash
   # 方法1：使用Python（推荐）
   python -m http.server 8000
   
   # 方法2：使用Node.js
   npx http-server
   
   # 方法3：使用PHP
   php -S localhost:8000
   ```

3. **访问应用**
   打开浏览器访问：`http://localhost:8000`

### 直接使用
也可以直接双击 `index.html` 文件在浏览器中打开使用。

## 📖 使用指南

### 基本操作流程

1. **选择精灵图**
   - 点击"选择图片文件"按钮或直接拖拽图片到上传区域
   - 支持的格式：PNG、JPEG、GIF、WebP

2. **设置切割参数**
   - **行数**：精灵图的行数（垂直方向分割数量）
   - **列数**：精灵图的列数（水平方向分割数量）
   - **起始序号**：切割文件的起始编号
   - **字号**：序号标注的字体大小

3. **配置高级选项**
   - **添加序号**：是否在切割后的图片上添加序号
   - **排序方向**：选择切割文件的排序方式

4. **生成和下载**
   - 点击"生成预览"查看切割效果
   - 点击"开始切割"进行实际切割并下载ZIP文件

### 高级功能

#### 历史记录管理
- 点击"历史文件"按钮打开历史窗格
- 历史窗格支持拖拽移动到任意位置
- 可重新下载之前的切割结果
- 支持清空所有历史记录

#### 快捷键操作
| 快捷键 | 功能 |
|--------|------|
| `Ctrl+O` | 打开文件选择器 |
| `Ctrl+P` | 生成预览 |
| `Ctrl+S` | 开始切割 |
| `ESC` | 关闭历史窗格或取消拖拽 |

## 🏗️ 项目结构

```
精灵图切割工具/Web/HTML/2.0/
├── index.html              # 主页面
├── README.md               # 项目说明文档
├── assets/                 # 资源文件夹
│   ├── css/
│   │   └── style.css       # 样式文件
│   └── js/
│       ├── app.js          # 主应用逻辑
│       ├── config.js       # 配置文件
│       ├── utils.js        # 工具函数
│       ├── image-processor.js  # 图像处理
│       └── history-manager.js  # 历史管理
```

### 核心模块说明

- **app.js**：主应用类，负责整体功能协调
- **image-processor.js**：图像处理模块，处理切割逻辑
- **history-manager.js**：历史记录管理，支持本地存储
- **utils.js**：通用工具函数
- **config.js**：应用配置常量

## 🛠️ 技术特性

### 前端技术栈
- **HTML5**：语义化标签和现代API
- **CSS3**：Flexbox、Grid布局、CSS变量、渐变效果
- **JavaScript ES6+**：模块化、类、箭头函数、Promise
- **Canvas API**：图像处理和切割
- **FileReader API**：文件读取和处理
- **JSZip**：ZIP文件生成和下载

### 设计特色
- **响应式设计**：适配各种屏幕尺寸
- **现代UI**：毛玻璃效果、渐变背景、微动画
- **用户体验**：拖拽支持、快捷键、实时反馈
- **无障碍性**：ARIA标签、键盘导航、屏幕阅读器支持

### 性能优化
- **资源预加载**：关键CSS和JS文件预加载
- **防抖处理**：输入事件防抖，减少不必要的计算
- **内存管理**：及时清理Canvas和图像数据
- **压缩优化**：图像处理采用高效算法

## 🔧 配置说明

### 配置文件 (config.js)
```javascript
const CONFIG = {
    // 存储键名
    STORAGE_KEYS: {
        HISTORY: 'spriteCutterHistory',
        SETTINGS: 'spriteCutterSettings'
    },
    
    // 限制设置
    LIMITS: {
        MAX_FILE_SIZE: 50 * 1024 * 1024,    // 最大文件大小 50MB
        MAX_HISTORY_COUNT: 20,               // 最大历史记录数
        MIN_GRID_SIZE: 1,                    // 最小网格尺寸
        MAX_GRID_SIZE: 50                    // 最大网格尺寸
    },
    
    // 默认设置
    DEFAULTS: {
        ROWS: 8,                             // 默认行数
        COLS: 12,                            // 默认列数
        START_NUM: 0,                        // 默认起始序号
        FONT_SIZE: 20,                       // 默认字号
        ADD_NUMBER: true,                    // 默认添加序号
        SORT_DIRECTION: 'normal'             // 默认排序方向
    }
};
```

### 浏览器兼容性
- **Chrome** 60+
- **Firefox** 60+
- **Safari** 12+
- **Edge** 79+
- **移动端**：iOS Safari 12+，Android Chrome 60+

## 🤝 贡献指南

### 开发环境搭建
1. Clone项目到本地
2. 使用HTTP服务器运行项目
3. 修改代码并测试
4. 提交Pull Request

### 代码规范
- 使用ES6+语法
- 遵循语义化命名
- 添加适当的注释
- 保持代码整洁

### 提交规范
- `feat`: 新功能
- `fix`: 修复bug
- `docs`: 文档更新
- `style`: 代码格式化
- `refactor`: 代码重构
- `test`: 测试相关

## 📝 更新日志

### v2.0 (2024-07-30)
- ✨ 新增可拖拽的历史文件窗格
- 🎨 优化UI设计，采用现代化界面
- 🐛 修复拖拽时滚动条消失的问题
- 💪 增强无障碍性支持
- 📱 改进移动端适配
- ⚡ 性能优化和代码重构

### v1.0
- 🎉 初始版本发布
- 📋 基础精灵图切割功能
- 💾 历史记录功能
- 🎛️ 多种排序模式

## 📄 许可证

本项目采用 MIT 许可证。详见 [LICENSE](LICENSE) 文件。

## 🆘 支持与反馈

如果在使用过程中遇到问题或有改进建议，请：

1. 查看本README文档
2. 检查浏览器控制台错误信息
3. 提交Issue描述问题
4. 联系开发者

## 🙏 致谢

感谢以下开源项目的支持：
- [JSZip](https://github.com/Stuk/jszip) - ZIP文件处理
- [MDN Web Docs](https://developer.mozilla.org/) - Web技术文档

---

**精灵图切割工具 v2.0** - 让图片切割变得简单高效！
